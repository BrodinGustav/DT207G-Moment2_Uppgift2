{"mappings":"AACA,yCAAyC;AACzC,SAAS,cAAc,MAAM;IACzB,MAAM,YAAY,SAAS,cAAc,CAAC;IAC1C,UAAU,SAAS,GAAG,IAA0B,wBAAwB;IAExE,OAAO,OAAO,CAAC,CAAA;QACX,MAAM,KAAK,SAAS,aAAa,CAAC;QAClC,GAAG,WAAW,GAAG;QACjB,UAAU,WAAW,CAAC,KAAqB,mCAAmC;IAClF;AACF;AAEA,EAAE;AACF,SAAS,gBAAgB,CAAC,oBAAoB;IAC5C,MAAM,MAAM,4BAAgC,0CAA0C;IAEtF,uDAAuD;IACvD,IAAI,OAAO,QAAQ,CAAC,QAAQ,KAAK,eAC7B,QAAQ,MAAgC,yBAAyB;SAIhE,IAAI,OAAO,QAAQ,CAAC,QAAQ,KAAK,aAElC,+CAA+C;IAC/C,SAAS,cAAc,CAAC,UAAU,gBAAgB,CAAC,UAAU,eAAe,KAAK;QAC7E,MAAM,cAAc,IAAgB,4CAA4C;QAChF,IAAI,cAAc,SAAS,cAAc,CAAC,eAAe,KAAK;QAC9D,IAAI,WAAW,SAAS,cAAc,CAAC,YAAY,KAAK;QACxD,IAAI,WAAW,SAAS,cAAc,CAAC,YAAY,KAAK;QAE5D,8CAA8C;QAC9C,IAAI,SAAS,EAAE;QAEb,wFAAwF;QACxF,IAAI,CAAC,aACH,OAAO,IAAI,CAAC;QAEhB,IAAI,CAAC,UACD,OAAO,IAAI,CAAC;QAEhB,IAAI,CAAC,UACD,OAAO,IAAI,CAAC;QAGpB,6DAA6D;QAC7D,IAAI,OAAO,MAAM,GAAG,GAAG;YACrB,cAAc;YACd;QACJ;QAEA,uEAAuE;QACvE,MAAM,WAAW,KAAK,aAAa,UAAU,WAAW,2BAA2B;QACnF,MAAM,QAAQ,MAAM,oDAAoD;QACxE;IAEQ;AAER;AAEF,8EAA8E;AAC9E,eAAe,QAAQ,GAAG;IACtB,MAAM,WAAW,MAAM,MAAM;IAE7B,IAAI,CAAC,SAAS,EAAE,EACd,MAAM,IAAI,MAAM;IAGlB,MAAM,OAAO,MAAM,SAAS,IAAI;IAEhC,IAAI,CAAC,MAAM,OAAO,CAAC,OACjB,MAAM,IAAI,MAAM;IAGlB,MAAM,KAAK,SAAS,cAAc,CAAC;IACnC,IAAI,CAAC,IAAI;QACP,QAAQ,KAAK,CAAC;QACd;IACF;IAEA,GAAG,SAAS,GAAG,IAA6B,eAAe;IAC3D,KAAK,OAAO,CAAC,CAAA;QACX,MAAM,KAAK,SAAS,aAAa,CAAC,OAAQ,qBAAqB;QAE/D,MAAM,cAAc,mBAAmB,CAAC,SAAS,EAAE,KAAK,WAAW,CAAC,CAAC;QACrE,MAAM,eAAe,mBAAmB,CAAC,WAAW,EAAE,KAAK,QAAQ,CAAC,CAAC;QACrE,MAAM,eAAe,mBAAmB,CAAC,UAAU,EAAE,KAAK,QAAQ,CAAC,CAAC;QAEpE,qBAAqB;QACrB,MAAM,YAAY,SAAS,aAAa,CAAC;QACzC,UAAU,WAAW,GAAG;QACxB,UAAU,gBAAgB,CAAC,SAAS;YAClC,MAAM,WAAW,KAAK,KAAK,EAAE,GAAY,4DAA4D;YACrG,MAAM,QAAQ,MAA2B,6CAA6C;QACxF;QAEA,oDAAoD;QACpD,GAAG,WAAW,CAAC;QACf,GAAG,WAAW,CAAC;QACf,GAAG,WAAW,CAAC;QACf,GAAG,WAAW,CAAC;QAEf,GAAG,WAAW,CAAC,KAA2B,oCAAoC;IAChF;AACF;AAEA,6CAA6C;AAC/C,SAAS,mBAAmB,IAAI;IAC5B,MAAM,OAAO,SAAS,aAAa,CAAC;IACpC,KAAK,WAAW,GAAG;IACnB,KAAK,KAAK,CAAC,UAAU,GAAG;IACxB,OAAO;AACT;AAEF,+CAA+C;AAC/C,eAAe,WAAW,GAAG,EAAE,EAAE;IAC7B,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,CAAC,EAAE,IAAI,CAAC,EAAE,GAAG,CAAC,EAAE;YAC3C,QAAQ;QACV;QACA,IAAI,CAAC,SAAS,EAAE,EACd,MAAM,IAAI,MAAM;QAElB,QAAQ,GAAG,CAAC;IACd,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,MAAM,OAAO;IAC7B;AACF;AAEA,mEAAmE;AACrE,eAAe,WAAW,GAAG,EAAE,WAAW,EAAE,QAAQ,EAAE,QAAQ;IAC1D,IAAI,OAAO;QACP,aAAa;QACb,UAAU;QACV,UAAU;IACd;IACA,MAAM,WAAW,MAAM,MAAM,KAAK;QAC9B,QAAQ;QACR,SAAS;YACL,gBAAgB,mBAA4B,uDAAuD;QACvG;QACA,MAAM,KAAK,SAAS,CAAC,MAA2B,oDAAoD;IACxG;IACA,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,QAAQ,GAAG,CAAC;AACd;AAEA,0DAA0D;AAC5D,SAAS;IACL,SAAS,cAAc,CAAC,UAAU,KAAK;AACzC","sources":["src/main.js"],"sourcesContent":["\r\n// Funktionen för att visa felmeddelanden\r\nfunction displayErrors(errors) {\r\n    const errorList = document.getElementById('error-list');\r\n    errorList.innerHTML = \"\";                       // Rensa befintlig lista\r\n  \r\n    errors.forEach(error => {\r\n        const li = document.createElement('li');\r\n        li.textContent = error;\r\n        errorList.appendChild(li);                 // Lägg till felmeddelande i listan\r\n    });\r\n  }\r\n\r\n  //\r\n  document.addEventListener(\"DOMContentLoaded\", function() {\r\n    const url = \"http://127.0.0.1:3000/cv\";     //Url till databasen för hämta/skicka data\r\n  \r\n    // Kör koden endast om den aktuella sidan är index.html\r\n    if (window.location.pathname === \"/index.html\") {\r\n        getData(url);                           // Hämta och visa CV-data\r\n    }\r\n  \r\n    // Kör koden endast om den aktuella sidan är add.html\r\n    else if (window.location.pathname === \"/add.html\") {\r\n        \r\n        //Hämta in ID för cvForm och lägg till lyssnare\r\n        document.getElementById('cvForm').addEventListener('submit', async function(event) {\r\n            event.preventDefault();             // Förhindra standardbeteende för formuläret\r\n            let companyname = document.getElementById('companyname').value;\r\n            let jobtitle = document.getElementById('jobtitle').value;\r\n            let location = document.getElementById('location').value;\r\n       \r\n        // Skapa en array för att lagra felmeddelanden\r\n        let errors = [];\r\n  \r\n          // Kontrollera om något av fälten är tomt och lägg till lämpligt felmeddelande i arrayen\r\n          if (!companyname) {\r\n            errors.push(\"Company name is required\");\r\n        }\r\n        if (!jobtitle) {\r\n            errors.push(\"Job title is required\");\r\n        }\r\n        if (!location) {\r\n            errors.push(\"Location is required\");\r\n        }\r\n  \r\n    // Om det finns fel, visa dem och avbryt formulärinsändningen\r\n    if (errors.length > 0) {\r\n      displayErrors(errors);\r\n      return;\r\n  }\r\n  \r\n  // Om inga fel finns, skicka data till servern och återställ formuläret\r\n  await createWork(url, companyname, jobtitle, location); // Skicka data till servern\r\n  await getData(url); // Uppdatera CV-listan efter att data har lagts till\r\n  resetForm();\r\n  \r\n          });\r\n    }\r\n  });\r\n  \r\n// Funktion för att hämta data och uppdatera listan med arbetslivserfarenheter\r\nasync function getData(url) {\r\n    const response = await fetch(url);\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Failed to fetch data');\r\n    }\r\n    \r\n    const data = await response.json();\r\n\r\n    if (!Array.isArray(data)) {\r\n      throw new Error('Data is not an array');\r\n  }\r\n\r\n    const ul = document.getElementById('cv-list');\r\n    if (!ul) {\r\n      console.error(\"UL element not found\");\r\n      return;\r\n    }\r\n   \r\n    ul.innerHTML = \"\";                          //Rensar listan\r\n    data.forEach(work => {\r\n      const li = document.createElement('li');  //Skapar <li>-element\r\n  \r\n      const companySpan = createSpanWithText(`Company: ${work.companyname}`);\r\n      const jobTitleSpan = createSpanWithText(`Job Title: ${work.jobtitle}`);\r\n      const locationSpan = createSpanWithText(`Location: ${work.location}`);\r\n  \r\n      // Skapa delete-knapp\r\n      const deleteBtn = document.createElement('button');\r\n      deleteBtn.textContent = 'Delete';\r\n      deleteBtn.addEventListener('click', async () => {\r\n        await deleteWork(url, work.id);          // Anropa deleteWork med URL och ID för arbetslivserfarenhet\r\n        await getData(url);                      // Uppdatera listan efter borttagning av data\r\n      });\r\n  \r\n      // Lägg till spans och delete-knapp i <li>-elementet\r\n      li.appendChild(companySpan);\r\n      li.appendChild(jobTitleSpan);\r\n      li.appendChild(locationSpan);\r\n      li.appendChild(deleteBtn);\r\n  \r\n      ul.appendChild(li);                       //Lägger till <li>-element till <ul>\r\n    });\r\n  }  \r\n\r\n  // Skapar <span> med angiven text och fetstil\r\nfunction createSpanWithText(text) {\r\n    const span = document.createElement('span');\r\n    span.textContent = text;\r\n    span.style.fontWeight = 'bold';\r\n    return span;\r\n  }\r\n  \r\n// Funktion för ta bort en arbetslivserfarenhet\r\nasync function deleteWork(url, id) {                    //URL och id som argument      \r\n    try {\r\n      const response = await fetch(`${url}/${id}`, {  //Skickar förfrågan till databasens url och id för radering\r\n        method: 'DELETE'\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('Failed to delete work experience');\r\n      }\r\n      console.log('Work experience deleted successfully');\r\n    } catch (error) {\r\n      console.error(error.message);\r\n    }\r\n  }\r\n\r\n  // Funktion för att lägga till ny arbetslivserfarenhet till servern\r\nasync function createWork(url, companyname, jobtitle, location) {\r\n    let work = {                                        //Skapar nytt objekt som skickar till databasen\r\n        companyname: companyname,\r\n        jobtitle: jobtitle,\r\n        location: location\r\n    };\r\n    const response = await fetch(url, {                 //Databasens URL som argument   \r\n        method: \"POST\",                                 //POST för att skicka data till databasen\r\n        headers: {\r\n            \"content-type\": \"Application/json\"          //Anger att det är JSON-data som skickas till databasen\r\n        },\r\n        body: JSON.stringify(work)                      //Omvandlar objektet till JSON-sträng till databasen\r\n    });\r\n    const data = await response.json();\r\n    console.log(data);\r\n  }\r\n  \r\n  // Funktionen för att rensa formuläret vid skicka av datan\r\nfunction resetForm() {\r\n    document.getElementById('cvForm').reset();\r\n  }\r\n  \r\n"],"names":[],"version":3,"file":"index.de158e3a.js.map","sourceRoot":"/__parcel_source_root/"}